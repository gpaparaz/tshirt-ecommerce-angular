const productsData = {
    "products": [
      {
        "id": 1,
        "name": "T-shirt estiva",
        "articleNumber": 1234456,
        "price": 129.99,
        "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua",
        "brand": "LiuJo",
        "imgUrl": "https://images.unsplash.com/photo-1527719327859-c6ce80353573?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1964&q=80",
        "colorName": "red",
        "colorId": 2001,
        "quantity": 30
      },
      {
        "id": 2,
        "name": "T-shirt estiva",
        "articleNumber": 1234456,
        "price": 129.99,
        "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua",
        "brand": "LiuJo",
        "imgUrl": "https://images.unsplash.com/photo-1527719327859-c6ce80353573?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1964&q=80",
        "colorName": "green",
        "colorId": 2002,
        "quantity": 17
      },
      {
        "id": 3,
        "name": "T-shirt estiva",
        "articleNumber": 1234456,
        "price": 129.99,
        "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua",
        "brand": "LiuJo",
        "imgUrl": "https://images.unsplash.com/photo-1527719327859-c6ce80353573?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1964&q=80",
        "colorName": "blue",
        "colorId": 2003,
        "quantity": 10
      },
  
      {
        "id": 4,
        "name": "T-shirt semi estiva",
        "articleNumber": 1234458,
        "price": 87.99,
        "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua",
        "brand": "LiuJo",
        "imgUrl": "https://images.unsplash.com/photo-1620799140408-edc6dcb6d633?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1972&q=80",
        "colorName": "red",
        "colorId": 2001,
        "quantity": 32
      },
      {
        "id": 5,
        "name": "T-shirt semi estiva",
        "articleNumber": 1234458,
        "price": 87.99,
        "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua",
        "brand": "LiuJo",
        "imgUrl": "https://images.unsplash.com/photo-1620799140408-edc6dcb6d633?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1972&q=80",
        "colorName": "green",
        "colorId": 2002,
        "quantity": 18
      },
      {
        "id": 6,
        "name": "T-shirt semi estiva",
        "articleNumber": 1234458,
        "price": 87.99,
        "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua",
        "brand": "LiuJo",
        "imgUrl": "https://images.unsplash.com/photo-1620799140408-edc6dcb6d633?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1972&q=80",
        "colorName": "blue",
        "colorId": 2003,
        "quantity": 14
      },
      {
        "id": 7,
        "name": "T-shirt autunnale",
        "articleNumber": 1234459,
        "price": 150.99,
        "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua",
        "brand": "Armani",
        "imgUrl": "https://images.unsplash.com/photo-1633966887768-64f9a867bdba?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2003&q=80",
        "colorName": "red",
        "colorId": 2001,
        "quantity": 32
      },
      {
        "id": 8,
        "name": "T-shirt primaverile",
        "articleNumber": 1234461,
        "price": 70.99,
        "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua",
        "brand": "Armani",
        "imgUrl": "https://images.unsplash.com/photo-1627910087352-f4e3e28d9f5f?auto=format&fit=crop&q=80&w=1974&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",
        "colorName": "green",
        "colorId": 2002,
        "quantity": 25
      },
      {
        "id": 9,
        "name": "T-shirt primaverile",
        "articleNumber": 1234461,
        "price": 70.99,
        "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua",
        "brand": "Armani",
        "imgUrl": "https://images.unsplash.com/photo-1627910087352-f4e3e28d9f5f?auto=format&fit=crop&q=80&w=1974&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",
        "colorName": "red",
        "colorId": 2001,
        "quantity": 14
      },
      {
        "id": 10,
        "name": "T-shirt primaverile",
        "articleNumber": 1234461,
        "price": 70.99,
        "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua",
        "brand": "Armani",
        "imgUrl": "https://images.unsplash.com/photo-1627910087352-f4e3e28d9f5f?auto=format&fit=crop&q=80&w=1974&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",
        "colorName": "blue",
        "colorId": 2003,
        "quantity": 0
      }
    ]
};

class ProductEntity {
  constructor(
    id,
    name,
    articleNumber,
    price,
    description,
    brand,
    imgUrl,
    colorName,
    colorId,
    quantity
  ) {
    this.id = id;
    this.name = name;
    this.articleNumber = articleNumber;
    this.price = price;
    this.description = description;
    this.brand = brand;
    this.imgUrl = imgUrl;
    this.colorName = colorName;
    this.colorId = colorId;
    this.quantity = quantity;
  }
}

class ReadQuery {
  colorId;
  availability;
  constructor(colorId, availability) {
    this.colorId = colorId;
    this.availability = availability;
  }
}

// const products = productsData.products; // Estrai l'array di prodotti dal tuo JSON

// const query = new ReadQuery(2002, false); // Cerca prodotti con colorId 2001

// function filterProductsAccordingQuery(products, query) {
//     console.log(products.length)
//     let filteredProducts = products;

//     if (query.colorId !== undefined) {
//         // Filtra per colorId se specificato
//         filteredProducts = filteredProducts.filter(product => product.colorId === query.colorId);
//     }

//     if (query.availability !== undefined) {
//        // Filtra per disponibilità
//        if (query.availability === true) {
//         filteredProducts = filteredProducts.filter(product => product.quantity > 0);
//     } else if (query.availability === false) {
//         // Filtra per disponibilità false
//         filteredProducts = filteredProducts.filter(product => product.quantity === 0);
//     }
//         // Se query.availability non è specificato, non viene applicato alcun filtro di disponibilità
//     }

//     return filteredProducts;
// }

// const filteredProducts = filterProductsAccordingQuery(products, query);

// console.log(filteredProducts);


function checkProductAvailability(products, availableProducts) {
   // Creare un oggetto per tenere traccia della disponibilità dei prodotti
   const availability = {};

   // Scorrere l'array dei prodotti richiesti
   for (const product of products) {
     const productId = product.articleNumber;
     const quantityRequested = product.quantity;
 
     // Verifica se il prodotto è disponibile
     const availableProduct = availableProducts.find((p) => p.id === productId);
 
     if (availableProduct) {
       // Il prodotto è stato trovato, verificare la quantità disponibile
       if (availableProduct.quantity >= quantityRequested) {
         // Il prodotto è disponibile in quantità sufficiente
         availability[productId] = true;
       } else {
         // Il prodotto non è disponibile in quantità sufficiente
         availability[productId] = false;
       }
     } else {
       // Il prodotto richiesto non è stato trovato
       availability[productId] = false;
     }
   }
 
   return availability;
}

// Esempio di utilizzo
const productsRequested = [
  { articleNumber: 1234461, quantity: 1 },
];

const availableProducts = productsData.products; // La tua base di dati di prodotti

const result = checkProductAvailability(productsRequested, availableProducts);

console.log(result);